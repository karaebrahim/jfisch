
<%= navigationBar(NavigationHelper::GAME_BUTTON_MAP[@game_type]) %>

<div class='row-fluid'>
  <div class='span3 center nexttoh1'>
    <a href='/dashboard' class='btn btn-inverse'>Dashboard</a>
  </div>
  <div class='span6 center'>
    <h3>NFL <%= SurvivorEntry.game_type_title(@game_type) %></h3>
    <input type=hidden id='hidden_game_type' value=<%= "'" + @game_type.to_s + "'" %> />
  </div>
  <div class='span3 center nexttoh1'>
    <a href=<%= "'/" + @game_type.to_s + "'" %> class='btn btn-inverse'>Entry Breakdown</a>
  </div>
</div>

<div class='row-fluid'>
  <div class='span10 offset1 center chooser'>
    <label>Choose week:</label>&nbsp&nbsp
    <select class='input-large' id="week_chooser">
    <% 1.upto(@current_week) { |week| %>
      <option value=<%= week %>
              <%= week == @current_week ? "selected" : "" %>>
        Week <%= week %>
      </option>
    <% } %>
    </select>
  </div>
</div>

<div class='row-fluid'>
  <div class='span12 center'>
    <div id="weekresults"></div>
  </div>
</div>

<script type="text/javascript">
  // Loads the weekly breakdown page asynchronously & populates the weekresults div with the results
  function week_breakdown_ajax() {
    $.ajax({
      url: "/ajax/" + document.getElementById("hidden_game_type").value + "/week/" + 
           (document.getElementById("week_chooser").selectedIndex + 1),
      success: function(data) {
        $("#weekresults").html(data);
      }
    });
  }

  // On document ready, load the selected week's breakdown, and set the selected week's breakdown to
  // be loaded whenever the week selector is changed.
  $(document).ready(function() {
    week_breakdown_ajax();
    $("#week_chooser").change(function() {
      week_breakdown_ajax();
    });
  });
</script>
